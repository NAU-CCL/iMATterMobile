{"ast":null,"code":"var _a;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Storage } from '@ionic/storage';\nimport { AnalyticsService } from 'src/app/services/analyticsService.service';\nimport * as firebase from 'firebase/app';\nimport { AngularFirestore } from '@angular/fire/firestore';\nlet MorePage = class MorePage {\n  constructor(router, storage, afs, analyticsService) {\n    this.router = router;\n    this.storage = storage;\n    this.afs = afs;\n    this.analyticsService = analyticsService;\n    this.analytic = {\n      page: '',\n      userID: '',\n      timestamp: '',\n      sessionID: ''\n    };\n    this.session = {\n      userID: '',\n      LogOutTime: '',\n      LoginTime: '',\n      numOfClickChat: 0,\n      numOfClickCalendar: 0,\n      numOfClickLModule: 0,\n      numOfClickInfo: 0,\n      numOfClickSurvey: 0,\n      numOfClickProfile: 0,\n      numOfClickMore: 0,\n      numOfClickHome: 0\n    };\n    this.storage.get('userCode').then(val => {\n      if (!val) {\n        this.router.navigate(['/access-denied']);\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.storage.get('authenticated').then(val => {\n      if (val === 'false') {\n        this.router.navigate(['/login/']);\n      }\n    });\n    this.addView();\n  }\n\n  updateLModuleClicks() {\n    this.analyticsService.updateClicks('numOfClickLModule');\n    console.log('added learning module click');\n  }\n\n  updateResourcePageClicks() {\n    this.analyticsService.updateClicks('numOfClickResources');\n  }\n\n  addView() {\n    this.storage.get('userCode').then(val => {\n      if (val) {\n        const ref = this.afs.firestore.collection('users').where('code', '==', val);\n        ref.get().then(result => {\n          result.forEach(doc => {\n            this.analytic.page = 'morePage';\n            this.analytic.userID = val;\n            this.analytic.timestamp = firebase.firestore.FieldValue.serverTimestamp(); // this.analytic.sessionID = this.idReference;\n\n            this.analyticsService.addView(this.analytic).then(() => {\n              console.log('successful added view: morePage');\n            }, err => {\n              console.log('unsucessful added view: morePage');\n            });\n          });\n        });\n      }\n    });\n  }\n\n  updateCalendarClicks() {\n    this.analyticsService.updateClicks('calendarClicks');\n  }\n\n  updateInfoDeskClicks() {\n    this.analyticsService.updateClicks('infoDeskClicks');\n  }\n\n  updateSettingsPageClicks() {\n    this.analyticsService.updateClicks('settingsClicks');\n  }\n\n};\nMorePage = __decorate([Component({\n  selector: 'app-more',\n  templateUrl: './more.page.html',\n  styleUrls: ['./more.page.scss']\n}), __metadata(\"design:paramtypes\", [Router, Storage, typeof (_a = typeof AngularFirestore !== \"undefined\" && AngularFirestore) === \"function\" ? _a : Object, AnalyticsService])], MorePage);\nexport { MorePage };","map":null,"metadata":{},"sourceType":"module"}