{"ast":null,"code":"var _a;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nlet FirestoreExamplesService = class FirestoreExamplesService {\n  constructor(firestore) {\n    //console.log(`Ex service initialized.`)\n    this.firestore = firestore; //this.getAllUsers();\n    //this.listenForNewData();\n    //this.firestore.collection('testRealTimeData').ref.add({message: 'hi', timestamp: new Date()});\n  }\n\n  getUser() {\n    this.firestore.collection('users').ref.where('code', '==', 'NTw38h').get().then(querySnap => {\n      querySnap.forEach(docSnap => {\n        let userDoc = docSnap.data(); // Update a single field on user or create it if it doesnt exist.\n\n        docSnap.ref.update({\n          cohort: 'cookie'\n        });\n        console.log(`User doc ${userDoc}`);\n      });\n    });\n  }\n\n  getAllUsers() {\n    this.firestore.collection('users').ref.get().then(querySnap => {\n      querySnap.forEach(docSnap => {\n        let userDoc = docSnap.data();\n        console.log(`User doc ${JSON.stringify(userDoc)}`);\n      });\n    });\n  }\n\n  addUser() {\n    // Add new doc to a collection. Does not need to have any specific fields.\n    this.firestore.collection('users').ref.add({}).then(docRef => {\n      console.log(`New user added to database. Doc is ${docRef.get().then(docSnap => {\n        console.log(`the doc data is ${JSON.stringify(docSnap.data())}`);\n      })}`);\n    }); // Create a new collection. Specify the name of a collec that does not exist and add a doc to it and\n    // the collection will be created.\n  }\n\n  listenForNewData() {\n    this.firestore.collection('testRealTimeData').snapshotChanges().subscribe(docChangeArray => {\n      docChangeArray.forEach(docChange => {\n        console.log(`The doc changed was ${JSON.stringify(docChange)}`);\n      });\n    });\n  }\n\n};\nFirestoreExamplesService = __decorate([Injectable({\n  providedIn: 'root'\n}), __metadata(\"design:paramtypes\", [typeof (_a = typeof AngularFirestore !== \"undefined\" && AngularFirestore) === \"function\" ? _a : Object])], FirestoreExamplesService);\nexport { FirestoreExamplesService };","map":null,"metadata":{},"sourceType":"module"}